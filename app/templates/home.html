{% extends "layout.html" %}

{% block content %}
<!-- <h1>Home</h1> -->
{% if session.get('user') %}
<h6>Username : {{ userId }}</h6>


<style>
    .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr; 
        gap: 20px;
        height: auto;
    }
    .grid-item {
        border: 1px solid #ccc;
        padding: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 250px; 
    }
    #myChart {
        width: 100% !important;
        height: 100% !important;
    }

    @media (max-width: 768px) {
        .grid-container {
            grid-template-columns: 1fr; 
        }
    }
</style>

<div class="grid-container">
    <div class="grid-item">
        <canvas id="myChart"></canvas>
    </div>

    <div class="grid-item">
        <p>Section 2 content here</p>
    </div>

    <div class="grid-item">
        <p>Section 3 content here</p>
    </div>


    <div class="grid-item">
        <p>Section 4 content here</p>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const labels = {{ cryptoLabels | tojson }};
    const data = {{ cryptoValues | tojson }};

    new Chart(document.getElementById('myChart'), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Total Cryptos',
                data: data,
                backgroundColor: [
                    'rgba(255, 99, 132, 0.5)',
                    'rgba(54, 162, 235, 0.5)',
                    'rgba(255, 206, 86, 0.5)',
                    'rgba(75, 192, 192, 0.5)',
                    'rgba(153, 102, 255, 0.5)'
                ],
                borderColor: [
                    'rgba(255, 99, 132, 1)',
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 206, 86, 1)',
                    'rgba(75, 192, 192, 1)',
                    'rgba(153, 102, 255, 1)'
                ],
                borderWidth: 1
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: { beginAtZero: true }
            }
        }
    });
</script>

{% else %}
<h2>Please <a href="/login">login</a> to continue...</h2>
{% endif %}
{% endblock %}
