"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5627],{21007:(E,A,_)=>{_.d(A,{G3:()=>R,I8:()=>L,Je:()=>N,K:()=>r,NQ:()=>n});var I="AES-GCM",t={name:"RSA-OAEP",hash:"SHA-256"},e={alg:"RSA1_5",enc:"A256GCM"},a=S(JSON.stringify({alg:"RSA-OAEP-256",enc:"A256GCM"}));async function L(E){let A=T(atob(E));return crypto.subtle.importKey("spki",A,t,!0,["wrapKey"])}async function N(E,A,_){let I=crypto.getRandomValues(new Uint8Array(12)),t=await crypto.subtle.wrapKey("raw",A,E,E.algorithm.name),{cipherText:e,authenticationTag:L}=_?await P(A,I,_):{cipherText:new ArrayBuffer(0),authenticationTag:new ArrayBuffer(0)};return function(E,A,_,I){let t=[E,A,_,I].map(E=>S(String.fromCodePoint(...new Uint8Array(E)))).join(".");return"".concat(a,".").concat(t)}(t,I,e,L)}async function n(E,A,_,t){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e,L=S(JSON.stringify(a)),N=await crypto.subtle.decrypt({name:I,iv:A,additionalData:new TextEncoder().encode(L)},E,function(E,A){let _=new Uint8Array(E.byteLength+A.byteLength);return _.set(new Uint8Array(E),0),_.set(new Uint8Array(A),E.byteLength),_.buffer}(_,t));return new TextDecoder().decode(N)}async function P(E,A,_){let t=T(_),e=await crypto.subtle.encrypt({name:I,iv:A,additionalData:new TextEncoder().encode(a),tagLength:128},E,t),L=e.byteLength-16,[N,n]=[e.slice(0,L),e.slice(L)];return{cipherText:N,authenticationTag:n}}async function r(){return crypto.subtle.generateKey({name:I,length:256},!0,["encrypt","decrypt"])}function R(E){let A=E.split(".").map(E=>{var A;return T(atob(((A=E)+"===".slice((A.length+3)%4)).replace(/-/gu,"+").replace(/_/gu,"/")))});if(5!==A.length)throw Error("Invalid JWE");return{header:JSON.parse(new TextDecoder().decode(A[0])),encryptedCek:A[1],iv:A[2],cipherText:A[3],authenticationTag:A[4]}}function T(E){return Uint8Array.from(E,E=>E.charCodeAt(0))}function S(E){return btoa(E).replace(/\+/gu,"-").replace(/\//gu,"_").replace(/=/gu,"")}},37192:(E,A,_)=>{_.d(A,{A7:()=>z,As:()=>Q,Bj:()=>S,E7:()=>O,Eu:()=>b,Fn:()=>T,IR:()=>i,JH:()=>C,Lo:()=>g,Rs:()=>$,Sr:()=>X,Tk:()=>x,Wb:()=>u,X6:()=>k,XJ:()=>H,Xi:()=>R,Yr:()=>V,a5:()=>j,af:()=>n,bU:()=>M,fc:()=>U,hH:()=>Z,mG:()=>B,oI:()=>r,qG:()=>F,qT:()=>Y,s$:()=>v,tP:()=>p,tk:()=>J,v8:()=>q,vj:()=>D,wD:()=>d,wX:()=>EE,xu:()=>W,zh:()=>f});var I=_(21007),t="twcard-management",e="twcard-order",a="borderless-accounts",L="twcard-fraud-bff",N="X-TW-TWCARD-CARD-TOKEN",n={InvalidCardActivationCodeException:"InvalidCardActivationCodeException",CardActivityThrottledByCountException:"CardActivityThrottledByCountException",PinChangeRequiredException:"PinChangeRequiredException",Unknown:"Unknown"},P=E=>"".concat(E.slice(0,3),"-").concat(E.slice(3)),r=async E=>{let{httpClient:A,cardToken:_,activationCode:I}=E,t={secret:P(I)};try{let{data:E}=await A.post({url:"/v2/borderless-accounts/cards/".concat(_,"/activation"),data:t,upstream:a});return{status:"SUCCESS",data:{card:E}}}catch(E){if(E instanceof Error&&"traceId"in E){let A=function(E){let A=E.data;if(!A.message)return"Unknown";let[_]=A.message.split(":");return _&&n[_]||"Unknown"}(E);if("PinChangeRequiredException"===A)return{status:"INCOMPLETE",data:{code:A}};throw Error("Activation error: ".concat(A),{cause:A})}throw E}};async function R(E){let{cardToken:A,httpClient:_}=E,{data:I}=await _.post({url:"/v1/borderless-accounts/cards/".concat(A,"/details/pinChange/step/requirements"),upstream:t});return I}async function T(E){let{cardToken:A,httpClient:_}=E,{data:I}=await _.post({url:"/v1/borderless-accounts/cards/".concat(A,"/details/pinChange/step/commit"),upstream:t});return I}var S=async E=>{let{httpClient:A,profileId:_,cardToken:I}=E,{data:t}=await A.get({url:"/v4/profiles/".concat(_,"/card-orders"),params:{cardToken:I},upstream:e});return t},c={COUNTRY_NON_ELIGIBLE:"COUNTRY_NON_ELIGIBLE",PROFILE_ADDRESS_NON_ELIGIBLE:"PROFILE_ADDRESS_NON_ELIGIBLE",PROFILE_TYPE_UNSUITABLE:"PROFILE_TYPE_UNSUITABLE"},D={ACTIVE:"ACTIVE",BLOCKED:"BLOCKED",EXPIRED:"EXPIRED",FROZEN:"FROZEN",INACTIVE:"INACTIVE",PARTNER_SUSPENDED:"PARTNER_SUSPENDED",PURGED:"PURGED"},O={BUSINESS_GREEN_BLUE:"BUSINESS_GREEN_BLUE",BUSINESS_PURPLE_BLUE:"BUSINESS_PURPLE_BLUE",PERSONAL_GREEN:"PERSONAL_GREEN",PERSONAL_PURPLE:"PERSONAL_PURPLE",PERSONAL_GREEN_WISE:"PERSONAL_GREEN_WISE",BUSINESS_BLUE_WISE:"BUSINESS_BLUE_WISE",PERSONAL_WHITE_ECO:"PERSONAL_WHITE_ECO",PERSONAL_ORANGE:"PERSONAL_ORANGE",PERSONAL_GREEN_WISE_2023:"PERSONAL_GREEN_WISE_2023",BUSINESS_GREEN_WISE_2023:"BUSINESS_GREEN_WISE_2023",DIGITAL_CARD_2023:"DIGITAL_CARD_2023",BUSINESS_DIGITAL_CARD_2023:"BUSINESS_DIGITAL_CARD_2023",BUSINESS_DIGITAL_ORANGE:"BUSINESS_DIGITAL_ORANGE",BUSINESS_DIGITAL_YELLOW:"BUSINESS_DIGITAL_YELLOW",BUSINESS_DIGITAL_PURPLE:"BUSINESS_DIGITAL_PURPLE",BUSINESS_DIGITAL_AQUA:"BUSINESS_DIGITAL_AQUA",PERSONAL_DIGITAL_GREEN:"PERSONAL_DIGITAL_GREEN",PERSONAL_DIGITAL_BLUE:"PERSONAL_DIGITAL_BLUE",PERSONAL_DIGITAL_FIRE:"PERSONAL_DIGITAL_FIRE",PERSONAL_DIGITAL_RED:"PERSONAL_DIGITAL_RED",PERSONAL_GREEN_WISE_2023_FLAG_ONLY:"PERSONAL_GREEN_WISE_2023_FLAG_ONLY",DIGITAL_CARD_2023_FLAG_ONLY:"DIGITAL_CARD_2023_FLAG_ONLY",PERSONAL_DIGITAL_GREEN_FLAG_ONLY:"PERSONAL_DIGITAL_GREEN_FLAG_ONLY",PERSONAL_DIGITAL_BLUE_FLAG_ONLY:"PERSONAL_DIGITAL_BLUE_FLAG_ONLY",PERSONAL_DIGITAL_FIRE_FLAG_ONLY:"PERSONAL_DIGITAL_FIRE_FLAG_ONLY",PERSONAL_DIGITAL_RED_FLAG_ONLY:"PERSONAL_DIGITAL_RED_FLAG_ONLY",BUSINESS_GREEN_WISE_2023_FLAG_ONLY:"BUSINESS_GREEN_WISE_2023_FLAG_ONLY",BUSINESS_DIGITAL_CARD_2023_FLAG_ONLY:"BUSINESS_DIGITAL_CARD_2023_FLAG_ONLY",BUSINESS_DIGITAL_ORANGE_FLAG_ONLY:"BUSINESS_DIGITAL_ORANGE_FLAG_ONLY",BUSINESS_DIGITAL_YELLOW_FLAG_ONLY:"BUSINESS_DIGITAL_YELLOW_FLAG_ONLY",BUSINESS_DIGITAL_PURPLE_FLAG_ONLY:"BUSINESS_DIGITAL_PURPLE_FLAG_ONLY",BUSINESS_DIGITAL_AQUA_FLAG_ONLY:"BUSINESS_DIGITAL_AQUA_FLAG_ONLY"},i={MASTERCARD:"MASTERCARD",VISA:"VISA"},s={DEBIT:"DEBIT"},C={BETA:"BETA",PRE_ORDER:"PRE_ORDER",PUBLIC:"PUBLIC"},o={TRANSFERWISE_LTD:"TRANSFERWISE_LTD"},G={TRUNCATE_OVERFLOW:"TRUNCATE_OVERFLOW"},l={TRANSFERWISE:"TRANSFERWISE"},u={NONE:"NONE",WITH_EMBOSSED_CODE:"WITH_EMBOSSED_CODE",WITH_PIN_CHANGE_AND_EMBOSSED_CODE:"WITH_PIN_CHANGE_AND_EMBOSSED_CODE",WITH_FIRST_CHIP_AND_PIN_TRANSACTION:"WITH_FIRST_CHIP_AND_PIN_TRANSACTION"},U={SUCCESS:"SUCCESS",FAILURE:"FAILURE"},d={MOBILE_WALLET:"MOBILE_WALLET",MOBILE_WALLET_UPSELL:"MOBILE_WALLET_UPSELL",APPLE_PAY:"APPLE_PAY",APPLE_PAY_IN_APP_PROVISIONING:"APPLE_PAY_IN_APP_PROVISIONING",GOOGLE_PAY:"GOOGLE_PAY",GOOGLE_PAY_IN_APP_PROVISIONING:"GOOGLE_PAY_IN_APP_PROVISIONING",TOKEN_PAN_MAPPING_UPDATE:"TOKEN_PAN_MAPPING_UPDATE",VIEW_SENSITIVE_CARD_DETAILS:"VIEW_SENSITIVE_CARD_DETAILS",VIEW_PIN:"VIEW_PIN",PREACTIVATE:"PREACTIVATE",PREACTIVATE_ATM_WITHDRAWAL:"PREACTIVATE_ATM_WITHDRAWAL",PREACTIVATE_ECOM:"PREACTIVATE_ECOM",PREACTIVATE_POS_CHIP:"PREACTIVATE_POS_CHIP",PREACTIVATE_WALLET:"PREACTIVATE_WALLET",UNBLOCK_PIN:"UNBLOCK_PIN",FREEZE:"FREEZE",CHANGE_PIN:"CHANGE_PIN",VIEW_LIMITS:"VIEW_LIMITS",REPLACE_CARD:"REPLACE_CARD",DELETE_CARD:"DELETE_CARD",LABEL_CARD:"LABEL_CARD",LINK_BALANCE:"LINK_BALANCE",EDIT_CARD_STYLE:"EDIT_CARD_STYLE"},p={PLACED:"PLACED",REQUIREMENTS_FULFILLED:"REQUIREMENTS_FULFILLED",CARD_DETAILS_CREATED:"CARD_DETAILS_CREATED",SENT_TO_MANUFACTURER:"SENT_TO_MANUFACTURER",PRODUCED:"PRODUCED",SHIPPED:"SHIPPED",DELIVERED:"DELIVERED",EXPECTED_DELIVERED:"EXPECTED_DELIVERED",COMPLETED:"COMPLETED",CANCELLED:"CANCELLED",RETURNED:"RETURNED"},V={MONTH:"MONTH",DAY:"DAY"},W={CARD_DAMAGED:"CARD_DAMAGED",CARD_LOST:"CARD_LOST",CARD_STOLEN:"CARD_STOLEN",TW_REQUEST:"TW_REQUEST",DELIVERY_FAILED:"DELIVERY_FAILED",CARD_EXPIRING:"CARD_EXPIRING",VIRTUAL_REPLACEMENT:"VIRTUAL_REPLACEMENT",DELIVERY_ADDRESS_CHANGE:"DELIVERY_ADDRESS_CHANGE",DELIVERY_OPTION_CHANGE:"DELIVERY_OPTION_CHANGE"},B={UNBLOCK_PIN:"UNBLOCK_PIN",FREEZE:"FREEZE",CHANGE_PIN:"CHANGE_PIN",VIEW_LIMITS:"VIEW_LIMITS",REPLACE_CARD:"REPLACE_CARD",DELETE_CARD:"DELETE_CARD",VIEW_SENSITIVE_CARD_DETAILS:"VIEW_SENSITIVE_CARD_DETAILS",VIEW_PIN:"VIEW_PIN",PREACTIVATE:"PREACTIVATE",PREACTIVATE_WALLET:"PREACTIVATE_WALLET",PREACTIVATE_ECOM:"PREACTIVATE_ECOM",PREACTIVATE_ATM_WITHDRAWAL:"PREACTIVATE_ATM_WITHDRAWAL",PREACTIVATE_POS_CHIP:"PREACTIVATE_POS_CHIP",APPLE_PAY:"APPLE_PAY",APPLE_PAY_IN_APP_PROVISIONING:"APPLE_PAY_IN_APP_PROVISIONING",GOOGLE_PAY:"GOOGLE_PAY",GOOGLE_PAY_IN_APP_PROVISIONING:"GOOGLE_PAY_IN_APP_PROVISIONING",SAMSUNG_PAY:"SAMSUNG_PAY",GARMIN_PAY:"GARMIN_PAY",FITBIT_PAY:"FITBIT_PAY",MASTERPASS:"MASTERPASS",CARD_ON_FILE:"CARD_ON_FILE",TOKEN_PAN_MAPPING_UPDATE:"TOKEN_PAN_MAPPING_UPDATE"},Y={NOT_INITIATED:"NOT_INITIATED",PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",NEEDS_ACTION:"NEEDS_ACTION",REFUNDED:"REFUNDED",CANCELLED:"CANCELLED"},F={TOPUP:"TOPUP",VERIFICATION:"VERIFICATION",FEE:"FEE",ADDRESS:"ADDRESS",PIN:"PIN",CARD_STYLE:"CARD_STYLE",REVIEW:"REVIEW",BALANCE_LINK:"BALANCE_LINK"},y={ECOM:"ECOM"},M={VIRTUAL_NON_UPGRADEABLE:"VIRTUAL_NON_UPGRADEABLE",VIRTUAL_UPGRADEABLE:"VIRTUAL_UPGRADEABLE",VIRTUAL_DISPOSABLE:"VIRTUAL_DISPOSABLE",PHYSICAL:"PHYSICAL"},h={CREATED:"CREATED"},w=()=>new Date("2022-10-01").toISOString(),m=()=>Object.values(B).map(E=>({id:E,enabled:!0})),g=async E=>{let{profileId:A,cardToken:_,httpClient:I,editCardData:e}=E,{data:a}=await I.patch({url:"/v1/profiles/".concat(A,"/cards/").concat(_),upstream:t,data:e});return a},f=async E=>{let{profileId:A,cardToken:_,httpClient:I}=E,{data:e}=await I.get({url:"/v1/profiles/".concat(A,"/cards/").concat(_,"/available-card-styles"),upstream:t});return e},v=async E=>{let{profileId:A,cardToken:_,httpClient:I}=E,{data:e}=await I.get({url:"/v1/profiles/".concat(A,"/cards/").concat(_,"/balance-link-settings"),upstream:t});return e},H=async E=>{let{httpClient:A,cardToken:_}=E,{data:I}=await A.get({url:"/v2/borderless-accounts/cards/".concat(_),upstream:a});return I},b=async E=>{let{groupId:A,httpClient:_,includesCountries:I,profileId:t}=E,{data:a}=await _.get({url:"/v4/profiles/".concat(t,"/card-orders/availability"),params:{includesCountries:I,groupId:A},upstream:e});return a},x=(O.PERSONAL_GREEN,O.PERSONAL_PURPLE,i.VISA,s.DEBIT,M.PHYSICAL,C.PUBLIC,O.PERSONAL_GREEN,O.PERSONAL_GREEN,B.APPLE_PAY,B.APPLE_PAY_IN_APP_PROVISIONING,B.GOOGLE_PAY_IN_APP_PROVISIONING,B.TOKEN_PAN_MAPPING_UPDATE,B.FITBIT_PAY,B.CARD_ON_FILE,B.GARMIN_PAY,B.MASTERPASS,B.SAMSUNG_PAY,B.GOOGLE_PAY,B.VIEW_SENSITIVE_CARD_DETAILS,B.VIEW_PIN,B.PREACTIVATE,B.PREACTIVATE_WALLET,B.PREACTIVATE_POS_CHIP,B.PREACTIVATE_ECOM,B.PREACTIVATE_ATM_WITHDRAWAL,B.DELETE_CARD,B.CHANGE_PIN,B.FREEZE,B.REPLACE_CARD,B.VIEW_LIMITS,B.UNBLOCK_PIN,u.WITH_FIRST_CHIP_AND_PIN_TRANSACTION,i.VISA,s.DEBIT,M.VIRTUAL_NON_UPGRADEABLE,C.PUBLIC,O.PERSONAL_PURPLE,O.PERSONAL_PURPLE,B.APPLE_PAY,B.APPLE_PAY_IN_APP_PROVISIONING,B.GOOGLE_PAY_IN_APP_PROVISIONING,B.TOKEN_PAN_MAPPING_UPDATE,B.FITBIT_PAY,B.CARD_ON_FILE,B.GARMIN_PAY,B.MASTERPASS,B.SAMSUNG_PAY,B.GOOGLE_PAY,B.VIEW_SENSITIVE_CARD_DETAILS,B.VIEW_PIN,B.PREACTIVATE,B.PREACTIVATE_WALLET,B.PREACTIVATE_POS_CHIP,B.PREACTIVATE_ECOM,B.PREACTIVATE_ATM_WITHDRAWAL,B.VIEW_LIMITS,B.REPLACE_CARD,B.DELETE_CARD,B.CHANGE_PIN,B.FREEZE,B.UNBLOCK_PIN,u.NONE,async E=>{let{httpClient:A,profileId:_,cardToken:I}=E,{data:t}=await A.get({url:"/v1/profiles/".concat(_,"/spending-controls"),params:{cardId:I},upstream:L});return t}),K=async E=>{let{cdeHttpClient:A}=E,{data:_}=await A.get({url:"/v1/clientSideEncryption/fetchEncryptingKey",upstream:"twcard-data"});return _},k=async E=>{let{httpClient:A}=E,{data:_}=await A.get({url:"/location/v1/countries",upstream:"geolocation"});return _.countries},j=async E=>{let{aesKey:A,cardToken:_,cdeHttpClient:t,oauthToken:e,scaRequest:a,scaRequestBaseUrl:L="",locale:n}=E,{key:P,version:r}=await K({cdeHttpClient:t}),R=await (0,I.I8)(P),T=await (0,I.Je)(R,A),S=await a("".concat(L,"/v1/sensitive-card-data/pin"),{method:"POST",body:JSON.stringify({keyVersion:r,encryptedPayload:T}),headers:{Authorization:"Bearer ".concat(e),[N]:_,"Accept-Language":n}}),{encryptedPayload:c}=await S.json(),D=(0,I.G3)(c);return(0,I.NQ)(A,D.iv,D.cipherText,D.authenticationTag).then(JSON.parse)},J=async E=>{let{aesKey:A,cardToken:_,cdeHttpClient:t,oauthToken:e,scaRequest:a,scaRequestBaseUrl:L="",locale:n}=E,{key:P,version:r}=await K({cdeHttpClient:t}),R=await (0,I.I8)(P),T=await (0,I.Je)(R,A),S=await a("".concat(L,"/v1/sensitive-card-data/details"),{method:"POST",body:JSON.stringify({keyVersion:r,encryptedPayload:T}),headers:{Authorization:"Bearer ".concat(e),[N]:_,"Accept-Language":n}}),{encryptedPayload:c}=await S.json(),D=(0,I.G3)(c);return(0,I.NQ)(A,D.iv,D.cipherText,D.authenticationTag).then(JSON.parse)},Q=async E=>{let{profileId:A,cardToken:_,httpClient:I}=E,{data:e}=await I.get({url:"/v1/profiles/".concat(A,"/cards/").concat(_,"/linkable-balances"),upstream:t});return e},X=async E=>{let{profileId:A,balanceId:_,httpClient:I}=E,{data:e}=await I.get({url:"/v1/profiles/".concat(A,"/balances/").concat(_,"/linkable-cards"),upstream:t});return e.cards},Z=async E=>{let{profileId:A,cardToken:_,body:I,httpClient:e}=E,{data:a}=await e.put({url:"/v1/profiles/".concat(A,"/cards/").concat(_,"/balance-link-settings"),upstream:t,data:I});return a},q=async E=>{let{httpClient:A,profileId:_,cardToken:I,controlType:t,isActive:e}=E,{data:a}=await A.patch({url:"/v1/profiles/".concat(_,"/spending-controls/").concat(t),params:{cardId:I},data:{state:e?"ACTIVE":"INACTIVE"},upstream:L});return a};async function z(E){let{cardToken:A,status:_,secret:I,httpClient:e}=E,{data:a}=await e.put({url:"/v2/borderless-accounts/cards/".concat(A,"/status"),data:{status:_,secret:I},upstream:t});return a}async function $(E){let{httpClient:A,cardToken:_}=E,{data:I}=await A.post({url:"/v1/borderless-accounts/cards/".concat(_,"/pinResetAndUnblock"),upstream:t});return I}function EE(E){return[c.COUNTRY_NON_ELIGIBLE,c.PROFILE_ADDRESS_NON_ELIGIBLE,c.PROFILE_TYPE_UNSUITABLE].some(A=>E.includes(A))}},50324:(E,A,_)=>{_.d(A,{C:()=>P});var I=_(65723),t=_(65849),e=_(83578),a=_(84319),L=_(97191),N=_(22155),n={contentWithIllustrationWrapper:"ContentWithIllustration-module_contentWithIllustrationWrapper__oSS3J",contentWithIllustrationTextWrapper:"ContentWithIllustration-module_contentWithIllustrationTextWrapper__hh-F8",contentWithIllustrationActionsWrapper:"ContentWithIllustration-module_contentWithIllustrationActionsWrapper__pz5Pd"};function P(E){let{illustrationName:A,illustrationAlt:_="",illustrationSize:P="medium",title:r,subtext:R,actions:T}=E,S=(0,N.useMemo)(()=>"string"==typeof r?(0,I.jsx)(t.A,{className:"text-xs-center m-a-0",type:e.o.DISPLAY_MEDIUM,children:r}):(0,I.jsx)("div",{className:"text-xs-center",children:r}),[r]),c=(0,N.useMemo)(()=>T?(0,I.jsx)("div",{className:"actions-wrapper ".concat(n.contentWithIllustrationActionsWrapper),children:T}):null,[T]),D=(0,N.useMemo)(()=>R?(0,I.jsx)(a.A,{className:"text-xs-center",children:R}):null,[R]);return(0,I.jsxs)("div",{className:n.contentWithIllustrationWrapper,children:[(0,I.jsx)("div",{className:"illustration-wrapper",children:(0,I.jsx)(L.a,{size:P,disablePadding:!0,alt:_,name:A})}),(0,I.jsxs)("div",{className:"text-wrapper ".concat(n.contentWithIllustrationTextWrapper),children:[S,D]}),c]})}}}]);
//# sourceMappingURL=5627-f8bd16f654b71156.js.map