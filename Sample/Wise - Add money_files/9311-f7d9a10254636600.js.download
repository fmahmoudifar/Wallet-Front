(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9311],{52396:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(16362),a=r.n(n);r(79474);var o=r(2486),u=r(56841),s=r(18326),c=r(13274);let i=a()(function(){return Promise.all([r.e(3599),r.e(2189),r.e(9534),r.e(5023),r.e(885),r.e(4164),r.e(7204),r.e(6391),r.e(9642),r.e(4045),r.e(8001),r.e(2237),r.e(542),r.e(2512),r.e(6976),r.e(9731),r.e(9690),r.e(6199),r.e(1917),r.e(7421),r.e(3013),r.e(2758),r.e(4582),r.e(4661),r.e(2074)]).then(r.bind(r,37324))},{ssr:!1,loading:function(e){var t=e.error;return t?(0,c.jsx)("div",{className:"p-x-2 p-y-5",style:{maxWidth:500,margin:"auto"},children:(0,c.jsx)(u.Ay,{error:(0,o.c)({errorResponse:t})})}):(0,c.jsx)(s.A,{})},loadableGenerated:{webpack:function(){return[37324]}}})},83551:(e,t,r)=>{"use strict";r.d(t,{mH:()=>T,p:()=>O,sh:()=>v,T:()=>f,vS:()=>h,Ow:()=>C,fo:()=>M,Vs:()=>I});var n=r(4483),a=r(46515),o=r(64501),u=r.n(o),s=r(83352),c=r(2486),i="X-Idempotence-UUID",l=r(68558).env.HOLD_BFF_URL||"/hold",d="hold-bff";function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){return y.apply(this,arguments)}function y(){return(y=(0,a.A)(u().mark(function e(t){var r,n,a;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.httpClient,n=t.userId,e.next=3,r.get({url:"/v1/user/".concat(n,"/assets/interest/onboarding/flow"),upstream:d,config:{baseURL:l}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=(0,a.A)(u().mark(function e(t){var r,a,o,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.httpClient,a=t.userId,o=t.body,e.prev=1,e.next=4,r.post({url:"/v1/user/".concat(a,"/assets/interest/onboarding/flow"),upstream:d,config:{baseURL:l,headers:(0,n.A)({},i,o.idempotenceUuid)},data:o});case 4:return p=e.sent,e.abrupt("return",p.data);case 8:throw e.prev=8,e.t0=e.catch(1),s.Nj.onSubmissionError({descriptionError:e.t0.message}),(0,c.c)({errorResponse:e.t0});case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function C(e){return g.apply(this,arguments)}function g(){return(g=(0,a.A)(u().mark(function e(t){var r,n,a,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.httpClient,n=t.userId,a=t.body,e.next=3,r.post({url:"/v1/user/".concat(n,"/assets/interest/onboarding/flow/tax-declaration"),upstream:d,config:{baseURL:l},data:a});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){return A.apply(this,arguments)}function A(){return(A=(0,a.A)(u().mark(function e(t){var r,a,o,s,c,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,a=t.balanceId,o=t.command,s=t.idempotenceUuid,c=t.httpClient,e.next=3,c.patch({url:"/v1/profiles/".concat(r,"/balances/").concat(a,"/details"),upstream:d,config:{baseURL:l,headers:(0,n.A)({},i,s)},data:o});case 3:return p=e.sent,e.abrupt("return",204===p.status);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function v(e){return b.apply(this,arguments)}function b(){return(b=(0,a.A)(u().mark(function e(t){var r,n,a,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,n=t.httpClient,a=t.groupId,e.next=3,n.get({url:"/v2/profiles/".concat(r,"/balances/add-money-defaults"),upstream:d,config:{baseURL:l},params:{groupId:a}});case 3:return o=e.sent,e.abrupt("return",o.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e){return w.apply(this,arguments)}function w(){return(w=(0,a.A)(u().mark(function e(t){var r,n,a,o,s;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,n=t.httpClient,a=t.balanceId,o=t.groupId,e.next=3,n.get({url:"/v2/profiles/".concat(r,"/balances/").concat(a,"/add-money-defaults"),upstream:d,config:{baseURL:l},params:{groupId:o}});case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function T(e){return x.apply(this,arguments)}function x(){return(x=(0,a.A)(u().mark(function e(t){var r,n,a,o,s,c,i,p;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,n=t.httpClient,a=t.quoteId,o=t.sourceBalanceId,s=t.targetBalanceId,c=t.sourceAmount,i=t.groupId,e.next=3,n.post({url:"/v1/profiles/".concat(r,"/shared-groups/").concat(i,"/balances/").concat(s,"/collaborator-add/calculate"),upstream:d,config:{baseURL:l},data:{quoteId:a,sourceBalanceId:o,targetBalanceId:s,sourceAmount:c}});case 3:return p=e.sent,e.abrupt("return",p.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=(0,a.A)(u().mark(function e(t){var r,n,a,o,s,c,i;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,n=t.httpClient,a=t.quoteId,o=t.sourceBalanceId,s=t.targetBalanceId,c=t.groupId,e.next=3,n.post({url:"/v1/profiles/".concat(r,"/shared-groups/").concat(c,"/balances/").concat(s,"/collaborator-add/process"),upstream:d,config:{baseURL:l},data:{quoteId:a,sourceBalanceId:o,targetBalanceId:s}});case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}},32848:(e,t,r)=>{"use strict";r.d(t,{A:()=>ed});var n=r(1827),a=r(68542),o=r(79474),u=r(8955),s=r(78329),c=r(28598),i=r(8190),l=r.n(i),d=r(88957),p=r(52396),f=r(37827),y=r(97344),h=r(29699),m=r(7253),C=r(26962),g=r(46515),I=r(14049),A=r(4483),v=r(64501),b=r.n(v),O=r(93031),w=r(89851),T=r(10481),x=r(8040),M=r(33669),P=r(34190),j=r(87915),S=r(19567),E=r(58136),k=r(4110),R=r(63195),N=r(46816),D=r(96355),L=r(81502),B=r(44409),F=r(56841),U=r(37612),G=r(19160),_=r(22588),W=r(90323),q=r(92111);function J(){return(J=(0,g.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({url:"/v1/auth/mfa",upstream:"user-security"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Y=r(83551);function V(){return(V=(0,g.A)(b().mark(function e(t){var r,n,a;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.profileId,n=t.httpClient,e.next=3,n.get({url:"/v1/profiles/".concat(r,"/payment-preferences"),upstream:"payment-preferences",params:{intent:"ADD_MONEY"}});case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Q=function(){var e=(0,g.A)(b().mark(function e(t){var r;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.get({url:"/v1/me",upstream:"webapp"});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();function K(){return(K=(0,g.A)(b().mark(function e(t){var r,n,a,o,u,s,c,i,l,d,p,f,y,h,m,C,g,I,A,v,O,w,T;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.httpClient,u=t.profileId,s=t.targetBalanceId,c=t.sharedGroupId,l=(i=t.sharedGroupMemberTypeQueryParam)&&["COLLABORATOR","OWNER"].includes(i)?i:null,e.next=4,Promise.all([c?(0,W.kA)({httpClient:o,profileId:u,query:{types:[W.Kk.STANDARD],ownerships:["COLLABORATOR","OWNER"],groupId:c}}):(0,W.kA)({profileId:u,query:{types:[W.Kk.STANDARD],primaryStandardOnly:!0},httpClient:o}),c?Promise.resolve([]):(0,W.zN)({profileId:u,httpClient:o}),(0,W.jM)({profileId:u,httpClient:o}),(0,W.hL)({profileId:u,httpClient:o}),Q(o),function(e){return J.apply(this,arguments)}(o),(function(e){return V.apply(this,arguments)})({httpClient:o,profileId:u}).catch(function(){return null}),function(e){var t=e.httpClient,r=e.profileId,n=e.balanceId,a=e.groupId;return n?(0,Y.p)({balanceId:n,httpClient:t,profileId:r,groupId:a}).catch(function(){return null}):(0,Y.sh)({httpClient:t,profileId:r,groupId:a})}({balanceId:s,httpClient:o,profileId:u,groupId:c}),"COLLABORATOR"===l&&c?(0,q.wc)({groupId:c,httpClient:o,profileId:u,getEligibleTeamMembersCommand:{}}):Promise.resolve([])]);case 4:return d=e.sent,f=(p=(0,_.A)(d,9))[0],y=p[1],h=p[2],m=p[3],C=p[4],g=p[5],I=p[6],A=p[7],v=null!==(r=null===(n=p[8].find(function(e){return"multi-user-access.admin"===e.roleReservedName}))||void 0===n?void 0:n.name)&&void 0!==r?r:null,O=s&&f.find(function(e){return e.id===s})||null,w=y.filter(function(e){return!f.some(function(t){return t.currency===e})}),T=O?[O]:f,e.abrupt("return",{targetBalances:T,targetCurrencies:O?[]:w,payInCurrencies:h,account:m,user:C,twoFaEnabled:g.factors.length>0,paymentPreferenceMethods:null!==(a=null==I?void 0:I.preferences)&&void 0!==a?a:[],addMoneyDefaults:A,sharedGroupId:c,sharedGroupMemberType:l,sharedGroupOwnerName:v});case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}var H=r(30627),X=r(69251),$=r(13274);let z=function(e){var t,r,n,a,o=e.profile,u=e.account,s=e.targetBalanceId,c=e.targetBalances,i=e.targetCurrencies,l=e.payInCurrencies,p=e.initialPayInCurrency,f=e.initialTargetAmount,y=e.paymentPreferenceMethods,h=e.quote,m=e.onComplete,C=e.onTrack,g=e.onTrackQuote,I=e.httpClient,A=e.onMount,v=e.onRecipientIdChange,b=e.sharedGroupMemberType,O=e.sharedGroupOwnerName,T=e.selectedBalanceRecipientId,x=(0,w.A)(),M=null!==(t=null!==(r=null==h?void 0:h.targetAmount)&&void 0!==r?r:f)&&void 0!==t?t:null,P=(null==h?void 0:h.sourceCurrency)||p,j=null!==(n=null==h?void 0:h.targetCurrency)&&void 0!==n?n:null===(a=c[0])||void 0===a?void 0:a.currency,S="COLLABORATOR"===b&&O?x.formatMessage({id:"add-money.collaborator-button-tip",defaultMessage:"You are sending money to {sharedGroupOwnerName}â€™s account"},{sharedGroupOwnerName:O}):null;return(0,d.A)(function(){A()}),(0,$.jsx)(X.A,{title:x.formatMessage({id:"add-money.calculator.short_page_title",defaultMessage:"Add money"}),amountLabel:x.formatMessage({id:"add-money.calculator.amount.label",defaultMessage:"Amount to add to Wise"}),payInCurrencyLabel:x.formatMessage({id:"add-money.calculator.pay-in-currency.label",defaultMessage:"Currency to pay in"}),balanceCurrencies:c.map(function(e){return e.currency}),targetBalances:c,otherCurrencies:i,initialPayInCurrency:P,initialTargetAmount:M,initialTargetCurrency:j,paymentPreferenceMethods:y,accountRecipientId:u.recipientId,payInCurrencies:l,placeholder:0,onComplete:function(e,t){"PAYMENT_PREFERENCE"===t.type?m(e,{type:t.method.payInType,id:t.method.payInId}):"PAYMENT_OPTION"===t.type?m(e,{type:t.paymentOption.payIn}):m(e,null)},onTrack:C,onTrackQuote:g,onRecipientIdChange:v,selectedBalanceRecipientId:T,profileId:o.id,httpClient:I,targetBalanceId:s,buttonTip:S})};var Z=r(64162),ee=r(7585),et=r(37598),er=r(18326);let en=function(e){var t=e.profileId,r=e.theme,n=e.screenMode,a=e.onComplete,o=(0,w.A)(),u=(0,ee.A)((0,g.A)(b().mark(function e(){return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,Z.cn)({profileId:t,intl:o,theme:r,screenMode:n});case 3:e.next=8;break;case 5:return e.prev=5,e.t0=e.catch(0),e.abrupt("return",Promise.reject({message:o.formatMessage({id:"open-balance.currency.missing-consent",defaultMessage:"You need to agree to our terms of use before you can open a balance"})}));case 8:a();case 9:case"end":return e.stop()}},e,null,[[0,5]])}))),s=u.loading,c=u.error;return(0,$.jsxs)($.Fragment,{children:[s&&(0,$.jsx)(er.A,{}),c&&(0,$.jsx)(et.A,{error:c})]})};var ea=r(28432);function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach(function(t){(0,A.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var es=function(e){return e.TWO_FA="two-fa",e.CONSENT="consent",e.CALCULATOR="calculator",e.CALCULATOR_BETA="calculator-beta",e.VERIFICATION="verification",e.PAYMENT="payment",e.SUCCESS="success",e}({}),ec=function(e){var t,r,n=e.PayInComponent,a=e.targetBalanceId,s=e.sharedGroupId,c=e.initialPayInCurrency,i=e.initialTargetAmount,l=e.profile,d=e.onComplete,p=e.onClose,f=e.onStepChange,y=e.httpClient,h=e.oauthToken,m=e.data,C=e.onTrack,g=e.features,A=e.language,v=e.theme,b=e.screenMode,O=e.addMoneySession,T=(0,o.useState)(m.twoFaEnabled),x=T[0],M=T[1],B=(0,o.useState)(null),U=B[0],G=B[1],_=(0,o.useRef)(-1),W=(0,o.useState)(null),q=W[0],J=W[1],Y=(0,o.useState)(null),V=Y[0],Q=Y[1],K=(0,o.useState)(null!==(t=null===(r=m.targetBalances[0])||void 0===r?void 0:r.recipientId)&&void 0!==t?t:null),H=K[0],X=K[1],Z=(0,o.useState)(null),ee=Z[0],et=Z[1],er=(0,o.useState)(null),eo=er[0],ec=er[1],ei=(0,o.useState)(!1),el=ei[0],ed=ei[1],ep=(0,o.useState)(!1),ef=ep[0],ey=ep[1],eh=(0,o.useState)(null),em=eh[0],eC=eh[1],eg=(0,o.useState)(),eI=eg[0],eA=eg[1],ev=U&&m.targetBalances.find(function(e){return e.currency===U.targetCurrency})||null,eb=(0,w.A)(),eO=(0,u.li)(),ew=eO.processingStatusResult,eT=eO.isProcessingFinished,ex=(0,ea.mC)(l,A,U,_,m.paymentPreferenceMethods,m.addMoneyDefaults,m.targetBalances,q,eo,c,null!=g?g:[],C,null==O?void 0:O.analytics,eI).trackEvent;(0,o.useEffect)(function(){eo&&ex(ea.Jh.TransferCreationFinished)},[eo]);var eM={key:es.TWO_FA,path:"/two-fa",render:function(e){var t=e.next;return(0,$.jsx)(N.A,{twoFaEnabled:x,onComplete:function(){return M(!0),t(),{}},initialPhoneNumber:l.phoneNumber||""})}},eP={key:es.CONSENT,path:"/consent",render:function(e){var t=e.next;return(0,$.jsx)(en,{profileId:l.id,screenMode:b,theme:v,onComplete:t})}},ej={key:es.CALCULATOR,path:"/calculator",render:function(e){var t=e.goTo;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j.A,{open:!!ef,onConfirmCancellation:function(){ey(!1),eo&&(ex(ea.Jh.TransactionCancelDialogConfirmed,{transferId:eo}),(0,S.oB)({transferId:eo,httpClient:y}).catch(function(){}),ec(null))},crossCurrency:!!(U&&U.sourceCurrency!==U.targetCurrency),onBack:function(){return ey(!1)},onCalculatorAlreadyPaid:function(){ex(ea.Jh.TransactionCancelDialogAborted,{transferId:eo}),t(es.SUCCESS)}}),(0,$.jsx)(z,{profile:l,account:m.account,targetBalanceId:a,targetBalances:m.targetBalances,targetCurrencies:m.targetCurrencies,payInCurrencies:m.payInCurrencies,initialTargetAmount:i,initialPayInCurrency:c,sharedGroupMemberType:m.sharedGroupMemberType,sharedGroupOwnerName:m.sharedGroupOwnerName,paymentPreferenceMethods:m.paymentPreferenceMethods,features:g,quote:U,onTrackQuote:function(e){G(e),_.current=_.current+1;var t=!_.current;e&&(ex(ea.Jh.QuoteLoaded),t&&ex("Add Money Flow - First quote"))},onComplete:function(e,r){ex(ea.Jh.CalculatorFinished),ex("Add Money Flow - Calculator complete"),G(e),J(r),t(es.VERIFICATION)},onTrack:ex,httpClient:y,onMount:function(){eo&&(ex(ea.Jh.TransactionCancelDialogShown),ey(!0))},onRecipientIdChange:function(e){return X(e)},selectedBalanceRecipientId:H})]})}},eS={key:es.CALCULATOR_BETA,path:"/calculator-beta",render:function(e){var t=e.goTo;return O?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j.A,{open:!!ef,onConfirmCancellation:function(){ey(!1),eo&&(ex(ea.Jh.TransactionCancelDialogConfirmed,{transferId:eo}),(0,S.oB)({transferId:eo,httpClient:y}).catch(function(){}),ec(null))},crossCurrency:!!(U&&U.sourceCurrency!==U.targetCurrency),onBack:function(){return ey(!1)},onCalculatorAlreadyPaid:function(){ex(ea.Jh.TransactionCancelDialogAborted,{transferId:eo}),t(es.SUCCESS)}}),(0,$.jsx)(E.A,{session:O,onTrack:ex,onViewModelChange:function(e){eA(e.remoteViewModel.metadata.analytics),ex(ea.Jh.QuoteUpdated)},onComplete:function(e,r){X(e.targetAccount||null),ex(ea.Jh.CalculatorFinished),ex("Add Money Flow - Calculator complete"),G(e),J(r),t(es.VERIFICATION)},httpClient:y,onMount:function(){eo&&(ex(ea.Jh.TransactionCancelDialogShown),ey(!0))}})]}):(0,$.jsx)("div",{className:"p-x-2 p-y-5",style:{maxWidth:500,margin:"auto"},children:(0,$.jsx)(F.Ay,{error:{code:"common.error"}})})}},eE={key:es.VERIFICATION,path:"/verification",render:function(e){var t=e.replaceWithDefault,r=e.goTo;return U?(0,$.jsx)(D.A,{actionToBeVerified:(0,L.g3)({profileId:l.id,quote:U,recipientId:null!=H?H:m.account.recipientId}),profileId:l.id,oauthToken:h,onErrorSkip:function(){Q("SKIPPED"),r(es.PAYMENT,{replace:!0})},onPending:function(){Q("PENDING"),r(es.PAYMENT,{replace:!0})},onComplete:function(){Q("COMPLETE"),r(es.PAYMENT,{replace:!0})},onTrack:function(e,t){C(e,eu(eu({},t),{},{"Application Sub-Context":"Add Money Flow"}))},flowId:"Add Money Flow",features:g,httpClient:y,skipOnError:!0}):t()}},ek={key:es.PAYMENT,path:"/payment",render:function(e){var t=e.replaceWithDefault,r=e.goTo,a=e.exit;return U&&V?(0,$.jsx)(R.A,{PayInComponent:n,balanceId:null==ev?void 0:ev.id,quote:U,preselectedPaymentOption:q,profile:l,balanceRecipientId:null!=H?H:m.account.recipientId,user:m.user,isNewTopUp:!0,onTransferCreated:ec,onComplete:function(e){et(e),ex(ea.Jh.BffSessionFinished,{reason:"PAYMENT_COMPLETED"}),r(es.SUCCESS)},onPostpone:function(){ex(ea.Jh.BffSessionFinished,{reason:"PAYMENT_PENDING"}),d()},onClose:a,context:"BALANCE_DEPOSIT",trackingContext:"Add Money",onGoToSelectionScreen:function(){(m.paymentPreferenceMethods||O)&&(r(O?es.CALCULATOR_BETA:es.CALCULATOR),eo&&(ex(ea.Jh.TransactionCancelledByPayAnotherWay,{transferId:eo}),(0,S.oB)({transferId:eo,httpClient:y}).catch(function(){}),ec(null)))},onPaymentOptionContinuation:function(e){eC(e)}}):t()}},eR={key:es.SUCCESS,path:"/success",render:function(e){var t,r=e.replaceWithDefault,n=e.exit;return V&&(ee||em)?ee?(0,$.jsx)(k.A,{balance:ev,targetAmount:ee.targetAmount,estimatedDelivery:ee.estimatedDelivery,estimatedDeliveryInWords:ee.estimatedDeliveryInWords,transferId:ee.transferId,profileId:l.id,verificationResult:V,onComplete:d,httpClient:y,sharedGroupId:s}):em&&eo?(0,$.jsx)(k.A,{balance:ev,targetAmount:{value:em.targetAmount,currency:em.targetCurrency},estimatedDelivery:null,estimatedDeliveryInWords:null!==(t=em.formattedEstimatedDelivery)&&void 0!==t?t:null,transferId:eo,profileId:l.id,verificationResult:V,onComplete:d,httpClient:y,sharedGroupId:s}):void n():r()},options:{isSuccess:(0,u.oJ)(ew,eT,V),hideStepper:!0,hideClose:!0}},eN=m.twoFaEnabled?es.CONSENT:es.TWO_FA;return(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(j.A,{open:el,onConfirmCancellation:function(){ed(!1),eo&&(ex("Add Money Flow - Cancelled transfer using the modal",{transferId:eo}),(0,S.oB)({transferId:eo,httpClient:y}).catch(function(){}),ec(null)),p()},crossCurrency:!!(U&&U.sourceCurrency!==U.targetCurrency),onBack:function(){return ed(!1)}}),(0,$.jsx)(P.A,{firstStep:eN,profile:l,onExit:function(){return ee?d():eo?ed(!0):void p()},steps:[eM,eP,O?eS:ej,eE,ek,eR],stepper:{items:[].concat((0,I.A)(m.twoFaEnabled?[]:[{label:eb.formatMessage({id:"add-money.steps.security",defaultMessage:"Security"}),key:es.TWO_FA}]),[{label:eb.formatMessage({id:"add-money.steps.amount",defaultMessage:"Amount"}),key:es.CALCULATOR},{label:eb.formatMessage({id:"add-money.steps.verification",defaultMessage:"Verification"}),key:es.VERIFICATION},{label:eb.formatMessage({id:"add-money.steps.payment",defaultMessage:"Payment"}),key:es.PAYMENT}])},onStepChange:function(e){e===es.CALCULATOR||e===es.CALCULATOR_BETA?ex(ea.Jh.CalculatorStarted):e===es.SUCCESS&&ex("Add Money Flow - Success"),null==f||f(e)}})]})};let ei=function(e){var t=e.profile,r=e.httpClient,n=e.locale,o=e.messages,u=e.targetBalanceId,s=e.onClose,i=e.data,l=e.sharedGroupId,d=e.sharedGroupMemberTypeQueryParam,p=e.features,f=(0,a.useRouter)(),y=(0,T.A)((0,g.A)(b().mark(function e(){var n,a,o,s,y;return b().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return i?Promise.resolve(i):function(e){return K.apply(this,arguments)}({httpClient:r,profileId:t.id,targetBalanceId:u,sharedGroupId:l,sharedGroupMemberTypeQueryParam:d})},e.next=3,n();case 3:if(a=e.sent,o=!!l,!(!(0,M.UE)(p,M.fR)||o)){e.next=7;break}return e.abrupt("return",{flowData:a,addMoneySession:null});case 7:return s=(0,c.tM)(f.query,"source"),e.next=10,(0,x.q)({profileId:t.id,httpClient:r,sessionReferrer:(0,H.aj)(s),flowSpecificConfig:u?(0,H.Mh)({targetBalanceId:u}):(0,H.sV)()});case 10:return y=e.sent,e.abrupt("return",{flowData:a,addMoneySession:y});case 12:case"end":return e.stop()}},e)}))),h=y.value,m=y.error;if(h){var C=h.flowData,I=h.addMoneySession;return(0,$.jsx)(B.A,{locale:n,messages:o,page:"addMoney",children:(0,$.jsx)(O.A,{isFeatureEnabled:!1,children:(0,$.jsx)(ec,eu(eu({},e),{},{data:C,addMoneySession:I}))})})}return m?(0,$.jsx)(B.A,{locale:n,messages:o,page:"addMoney",children:(0,$.jsx)(O.A,{isFeatureEnabled:!1,children:(0,$.jsx)(U.A,{profile:t,error:m,onClose:s})})}):(0,$.jsx)(B.A,{locale:n,messages:o,page:"addMoney",children:(0,$.jsx)(O.A,{isFeatureEnabled:!1,children:(0,$.jsx)(G.A,{profile:t,onClose:s})})})},el=function(e){var t=e.balanceId,r=e.initialPayInCurrency,n=e.initialTargetAmount,o=e.profile,u=e.language,s=e.locale,i=e.messages,g=e.httpClient,I=e.legacyTokens,A=e.data,v=e.session,b=e.features,O=e.sharedGroupId,w=e.sharedGroupMemberTypeQueryParam,T=(0,f.B)("top_up"),x=(0,a.useRouter)(),M=(0,c.tM)(x.query,"next"),P=(0,c.tM)(x.query,"source");(0,y.x)(u,I),(0,d.A)(function(){return(0,m.I)("Add Money Flow - Start")});var j=function(){return(0,C.LN)({balanceId:t,groupId:O,source:P,next:"bills"===M?M:void 0})};return(0,$.jsx)(ei,{PayInComponent:p.A,targetBalanceId:t,initialPayInCurrency:r,initialTargetAmount:n,profile:o,onClose:j,onComplete:function(){T(),(0,h.W)("MCA_topup_action",{user_id:o.userId,profile:o.type.toLowerCase(),fbpixel_em:v.userEmail?l()(v.userEmail.toLowerCase()).toString():""}),(0,m.I)("Add Money Flow - Complete"),j()},onStepChange:function(e){e===es.CALCULATOR?(0,m.I)("Add Money Flow - Calculator"):e===es.VERIFICATION?(0,m.I)("Add Money Flow - Verification"):e===es.PAYMENT?(0,m.I)("Add Money Flow - Payment"):e===es.SUCCESS&&(T(),(0,m.I)("Add Money Flow - Success"))},language:u,locale:s,messages:i,httpClient:g,oauthToken:I.oauthToken,data:A,onTrack:m.I,features:b,sharedGroupId:O,sharedGroupMemberTypeQueryParam:w})},ed=function(e){var t,r,o,i,l=e.language,d=e.locale,p=e.messages,f=e.profile,y=e.data,h=e.legacyTokens,m=e.session,C=e.theme,g=e.screenMode,I=e.features,A=(0,a.useRouter)(),v=(0,c.L5)(A.query,"balanceId"),b=(0,c.L5)(A.query,"target-amount"),O=(0,c.tM)(A.query,"pay-in-currency"),w=(0,c.L5)(A.query,"sharedGroupId"),T=(0,c.tM)(A.query,"sharedGroupMemberType"),x=(0,s.SX)(d),M=null!=O?O:(t=y.addMoneyDefaults,b?null:null!==(r=null==t?void 0:t.sourceCurrency)&&void 0!==r?r:null),P=null!=b?b:(o=y.addMoneyDefaults,O?null:null!==(i=null==o?void 0:o.targetAmount.value)&&void 0!==i?i:null);return(0,$.jsx)(n.NP,{theme:C,screenMode:g,children:(0,$.jsx)(u.Ay,{children:(0,$.jsx)(el,{balanceId:v,initialPayInCurrency:M,initialTargetAmount:P,profile:f,language:l,locale:d,messages:p,httpClient:x,legacyTokens:h,data:y,session:m,features:I,sharedGroupId:w,sharedGroupMemberTypeQueryParam:T})})})}},33669:(e,t,r)=>{"use strict";r.d(t,{Pe:()=>o,RC:()=>n,Rk:()=>a,UE:()=>s,fR:()=>u});var n="balance-flow-create-personal-profile-form-dfv3",a="balance-flow-management-ui",o="balance-flows-kyc-df-revamp",u="web-bff-driven-add-money-calculator";function s(e,t){var r=null==e?void 0:e.find(function(e){return e.featureName===t});return!!(r&&r.enabled)}},97344:(e,t,r)=>{"use strict";r.d(t,{x:()=>c});var n=r(4483),a=r(79474);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var s=function(e,t){window.config=u(u({},window.config),{},{serverUrl:"",apiUrl:"/gateway",lang:e,environment:"production"},t)},c=function(e,t){(0,a.useEffect)(function(){s(e,t)},[])}},29699:(e,t,r)=>{"use strict";r.d(t,{W:()=>u});var n=r(4483);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.A)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.dataLayer=window.dataLayer||[],window.dataLayer.push(o(o({},t),{},{event:e}))}},83352:(e,t,r)=>{"use strict";r.d(t,{$D:()=>u.$D,Dk:()=>i.D,FI:()=>f,FQ:()=>m,Nj:()=>y,PW:()=>c.P,Vb:()=>h,aW:()=>p.a,rt:()=>d.r,sr:()=>l.s});var n=r(20928),a=r(29009),o=r(24052),u=r(59278),s=r(7253),c=r(80056),i=r(94766),l=r(41641),d=r(26938),p=r(7694),f=(0,n.Ed)(s.I),y=(0,a.QY)(s.I),h=(0,o.SD)(s.I),m=(0,u._T)(s.I)},37598:(e,t,r)=>{"use strict";r.d(t,{A:()=>o}),r(79474);var n=r(56841),a=r(13274);let o=function(e){var t=e.error;return(0,a.jsx)("div",{className:"p-x-2 p-y-5",children:(0,a.jsx)("div",{style:{maxWidth:500,margin:"auto"},children:(0,a.jsx)(n.Ay,{error:t})})})}},37612:(e,t,r)=>{"use strict";r.d(t,{A:()=>s}),r(79474);var n=r(56841),a=r(29331),o=r(13274),u={code:"common.error"};let s=function(e){var t=e.profile,r=e.onClose,s=e.error;return(0,o.jsx)(a.A,{profile:t,onClose:r,children:(0,o.jsx)("div",{className:"p-x-2 p-y-5",style:{maxWidth:500,margin:"auto"},children:(0,o.jsx)(n.Ay,{error:s||u})})})}},19160:(e,t,r)=>{"use strict";r.d(t,{A:()=>u}),r(79474);var n=r(29331),a=r(18326),o=r(13274);let u=function(e){var t=e.profile,r=e.onClose;return(0,o.jsx)(n.A,{profile:t,onClose:r,children:(0,o.jsx)(a.A,{})})}},73936:()=>{}}]);
//# sourceMappingURL=9311-f7d9a10254636600.js.map